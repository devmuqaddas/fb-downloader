<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Facebook Video Downloader - Fast & High Quality</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <style>
    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    :root {
      --primary-color: #4267b2;
      --primary-dark: #365899;
      --secondary-color: #42b883;
      --secondary-dark: #369870;
      --danger-color: #e74c3c;
      --danger-dark: #c0392b;
      --warning-color: #f39c12;
      --warning-dark: #e67e22;
      --success-color: #42b883;
      --success-dark: #369870;
      --text-primary: #333;
      --text-secondary: #666;
      --text-light: #999;
      --bg-primary: #ffffff;
      --bg-secondary: #f8f9fa;
      --bg-tertiary: #f0f2f5;
      --border-color: #e1e5e9;
      --shadow-light: 0 2px 10px rgba(0, 0, 0, 0.1);
      --shadow-medium: 0 4px 20px rgba(0, 0, 0, 0.15);
      --shadow-heavy: 0 8px 30px rgba(0, 0, 0, 0.2);
      --border-radius: 12px;
      --border-radius-small: 8px;
      --transition: all 0.3s ease;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: var(--text-primary);
      line-height: 1.6;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    /* Placeholder Image Styles */
    .placeholder-image {
      background: linear-gradient(135deg, #f0f2f5 0%, #e1e5e9 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 2rem;
      border: 2px dashed #ccc;
    }
    /* Header Styles */
    .header {
      text-align: center;
      margin-bottom: 40px;
      color: white;
    }
    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    .logo-icon {
      background: white;
      padding: 20px;
      border-radius: 50%;
      box-shadow: var(--shadow-heavy);
    }
    .logo-icon i {
      font-size: 3rem;
      color: var(--primary-color);
    }
    .logo-text h1 {
      font-size: 2.5rem;
      font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      margin-bottom: 5px;
    }
    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
      font-weight: 300;
    }
    .features {
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }
    .feature {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.15);
      padding: 10px 20px;
      border-radius: 25px;
      backdrop-filter: blur(10px);
      font-size: 0.9rem;
      font-weight: 500;
      transition: var(--transition);
    }
    .feature:hover {
      background: rgba(255, 255, 255, 0.25);
      transform: translateY(-2px);
    }
    .feature i {
      color: var(--secondary-color);
    }
    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    .section {
      background: var(--bg-primary);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-medium);
      overflow: hidden;
      animation: fadeIn 0.5s ease-out;
    }
    /* URL Input Section */
    .url-section {
      padding: 30px;
    }
    .input-container {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      align-items: flex-start;
    }
    .input-group {
      flex: 1;
      display: flex;
      gap: 15px;
    }
    .url-input {
      flex: 1;
      padding: 15px 20px;
      border: 2px solid var(--border-color);
      border-radius: var(--border-radius);
      font-size: 1rem;
      transition: var(--transition);
      background: var(--bg-secondary);
    }
    .url-input:focus {
      outline: none;
      border-color: var(--primary-color);
      background: var(--bg-primary);
      box-shadow: 0 0 0 3px rgba(66, 103, 178, 0.1);
    }
    .url-help {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    .url-help i {
      color: var(--primary-color);
    }
    /* Button Styles */
    .btn {
      padding: 15px 25px;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
      text-decoration: none;
      min-width: 120px;
    }
    .btn:hover {
      transform: translateY(-2px);
    }
    .btn:active {
      transform: translateY(0);
    }
    .btn-primary {
      background: linear-gradient(
        135deg,
        var(--primary-color),
        var(--primary-dark)
      );
      color: white;
    }
    .btn-primary:hover {
      box-shadow: 0 8px 25px rgba(66, 103, 178, 0.3);
    }
    .btn-secondary {
      background: linear-gradient(135deg, var(--text-secondary), #555);
      color: white;
    }
    .btn-secondary:hover {
      box-shadow: 0 8px 25px rgba(102, 102, 102, 0.3);
    }
    .btn-success {
      background: linear-gradient(
        135deg,
        var(--success-color),
        var(--success-dark)
      );
      color: white;
      animation: pulse 2s ease-in-out infinite;
    }
    .btn-success:hover {
      box-shadow: 0 8px 25px rgba(66, 184, 131, 0.4);
      animation: none;
    }
    .btn-danger {
      background: linear-gradient(
        135deg,
        var(--danger-color),
        var(--danger-dark)
      );
      color: white;
    }
    .btn-danger:hover {
      box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3);
    }
    .btn-outline {
      background: var(--bg-secondary);
      color: var(--text-secondary);
      border: 2px solid var(--border-color);
    }
    .btn-outline:hover {
      background: var(--bg-tertiary);
      border-color: var(--primary-color);
      color: var(--primary-color);
    }
    /* Loading Section */
    .loading-section {
      padding: 60px 30px;
      text-align: center;
    }
    .loading-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }
    .loading-spinner {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
    }
    .spinner {
      width: 60px;
      height: 60px;
      border: 4px solid var(--bg-tertiary);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    .loading-dots {
      display: flex;
      gap: 8px;
    }
    .loading-dots span {
      width: 8px;
      height: 8px;
      background: var(--primary-color);
      border-radius: 50%;
      animation: bounce 1.4s ease-in-out infinite both;
    }
    .loading-dots span:nth-child(1) {
      animation-delay: -0.32s;
    }
    .loading-dots span:nth-child(2) {
      animation-delay: -0.16s;
    }
    .loading-text {
      font-size: 1.1rem;
      color: var(--text-secondary);
      font-weight: 500;
    }
    /* Video Info Section */
    .video-info-section {
      overflow: visible;
    }
    .video-card {
      display: flex;
      gap: 25px;
      padding: 30px;
    }
    .video-thumbnail {
      position: relative;
      min-width: 220px;
      height: 165px;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow-medium);
    }
    .video-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .video-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      transition: var(--transition);
    }
    .video-overlay:hover {
      background: rgba(0, 0, 0, 0.8);
      transform: translate(-50%, -50%) scale(1.1);
    }
    .video-details {
      flex: 1;
    }
    .video-details h2 {
      font-size: 1.6rem;
      margin-bottom: 15px;
      color: var(--text-primary);
      line-height: 1.4;
    }
    .video-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      color: var(--text-secondary);
      margin-bottom: 15px;
    }
    .video-meta span {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.95rem;
    }
    .video-meta i {
      color: var(--primary-color);
    }
    .video-description {
      color: var(--text-secondary);
      font-size: 0.95rem;
      line-height: 1.6;
    }
    /* Format Section */
    .format-section {
      padding: 0 30px 30px;
    }
    .format-section h3 {
      margin-bottom: 20px;
      color: var(--text-primary);
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .format-notice {
      display: flex;
      align-items: center;
      gap: 10px;
      background: #e8f5e8;
      color: #2d5a2d;
      padding: 12px 20px;
      border-radius: var(--border-radius-small);
      margin-bottom: 25px;
      font-size: 0.95rem;
      border-left: 4px solid var(--success-color);
    }
    .format-notice i {
      color: var(--success-color);
    }
    .format-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .format-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--bg-secondary);
      border-radius: var(--border-radius);
      border: 2px solid transparent;
      transition: var(--transition);
    }
    .format-item:hover {
      border-color: var(--primary-color);
      background: var(--bg-primary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-light);
    }
    .format-info {
      display: flex;
      align-items: center;
      gap: 20px;
    }
    .format-quality {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 600;
      color: var(--text-primary);
      font-size: 1.1rem;
    }
    .format-quality i {
      color: var(--primary-color);
      font-size: 1.3rem;
    }
    .priority-badge {
      background: linear-gradient(
        135deg,
        var(--success-color),
        var(--success-dark)
      );
      color: white;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: 700;
      margin-left: 15px;
      animation: pulse 2s infinite;
    }
    .format-details {
      display: flex;
      gap: 15px;
      color: var(--text-secondary);
      font-size: 0.9rem;
      flex-wrap: wrap;
    }
    .format-ext {
      background: var(--primary-color);
      color: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .format-audio {
      background: var(--success-color);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .format-audio-warning {
      background: var(--danger-color);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .format-fps,
    .format-bitrate {
      background: var(--warning-color);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
    }
    .format-size {
      background: var(--text-secondary);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.75rem;
    }
    .download-format-btn {
      padding: 12px 24px;
      background: linear-gradient(
        135deg,
        var(--success-color),
        var(--success-dark)
      );
      color: white;
      border: none;
      border-radius: var(--border-radius-small);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .download-format-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(66, 184, 131, 0.3);
    }
    .download-format-btn.recommended {
      background: linear-gradient(
        135deg,
        var(--warning-color),
        var(--warning-dark)
      );
      animation: glow 2s ease-in-out infinite alternate;
    }
    /* Download Section */
    .download-section {
      padding: 30px;
    }
    .download-card h3 {
      margin-bottom: 25px;
      color: var(--text-primary);
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      font-size: 1.4rem;
    }
    .download-info {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: #e8f5e8;
      color: #2d5a2d;
      padding: 12px 20px;
      border-radius: var(--border-radius-small);
      margin-bottom: 30px;
      font-size: 0.95rem;
      border-left: 4px solid var(--success-color);
    }
    .download-info i {
      color: var(--success-color);
    }
    .progress-container {
      margin-bottom: 30px;
    }
    .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .progress-percent {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }
    .progress-speed {
      color: var(--text-secondary);
      font-weight: 500;
    }
    .progress-bar {
      width: 100%;
      height: 16px;
      background: var(--bg-tertiary);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 15px;
      position: relative;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(
        90deg,
        var(--success-color),
        var(--success-dark)
      );
      border-radius: 8px;
      transition: width 0.3s ease;
      width: 0%;
      position: relative;
    }
    .progress-fill::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        90deg,
        transparent,
        rgba(255, 255, 255, 0.3),
        transparent
      );
      animation: shimmer 2s infinite;
    }
    .progress-details {
      display: flex;
      justify-content: space-between;
      color: var(--text-secondary);
      font-size: 0.9rem;
      flex-wrap: wrap;
      gap: 10px;
    }
    .download-complete {
      text-align: center;
      padding: 30px;
      background: #f0f9f4;
      border-radius: var(--border-radius);
      border: 2px solid var(--success-color);
    }
    .success-icon i {
      font-size: 4rem;
      color: var(--success-color);
      margin-bottom: 20px;
      animation: bounceIn 0.6s ease-out;
    }
    .download-complete p {
      margin-bottom: 25px;
      color: var(--text-primary);
      font-weight: 600;
      font-size: 1.1rem;
    }
    .download-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-bottom: 25px;
      flex-wrap: wrap;
    }
    .download-notice,
    .auto-reset-notice {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 20px;
      border-radius: var(--border-radius-small);
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    .download-notice {
      background: #e3f2fd;
      color: #1565c0;
      border: 1px solid #bbdefb;
    }
    .download-notice i {
      color: #2196f3;
    }
    .auto-reset-notice {
      background: #fff3cd;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    .auto-reset-notice i {
      color: var(--warning-color);
    }
    /* Error Section */
    .error-section {
      padding: 50px 30px;
      text-align: center;
    }
    .error-icon i {
      font-size: 4rem;
      color: var(--danger-color);
      margin-bottom: 25px;
    }
    .error-card h3 {
      color: var(--danger-color);
      margin-bottom: 15px;
      font-size: 1.5rem;
    }
    .error-card p {
      color: var(--text-secondary);
      margin-bottom: 30px;
      line-height: 1.6;
      font-size: 1.1rem;
    }
    .error-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    /* Files Section */
    .files-section {
      padding: 30px;
    }
    .files-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    .files-header h3 {
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 1.4rem;
    }
    .files-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      background: var(--bg-secondary);
      border-radius: var(--border-radius);
      transition: var(--transition);
    }
    .file-item:hover {
      background: var(--bg-tertiary);
      transform: translateY(-2px);
      box-shadow: var(--shadow-light);
    }
    .file-info {
      display: flex;
      align-items: center;
      gap: 15px;
      flex: 1;
      min-width: 0;
    }
    .file-info i {
      font-size: 1.8rem;
      color: var(--primary-color);
      flex-shrink: 0;
    }
    .file-details {
      display: flex;
      flex-direction: column;
      min-width: 0;
      flex: 1;
    }
    .file-name {
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 4px;
      word-break: break-word;
      font-size: 1rem;
    }
    .file-size {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }
    .file-download-btn {
      padding: 10px 20px;
      background: linear-gradient(
        135deg,
        var(--primary-color),
        var(--primary-dark)
      );
      color: white;
      border: none;
      border-radius: var(--border-radius-small);
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
      flex-shrink: 0;
    }
    .file-download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(66, 103, 178, 0.3);
    }
    .no-files {
      text-align: center;
      color: var(--text-light);
      font-style: italic;
      padding: 60px 20px;
      font-size: 1.1rem;
    }
    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .toast {
      background: linear-gradient(
        135deg,
        var(--success-color),
        var(--success-dark)
      );
      color: white;
      padding: 15px 20px;
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-heavy);
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 600;
      max-width: 400px;
      transform: translateX(450px);
      opacity: 0;
      transition: var(--transition);
    }
    .toast.error {
      background: linear-gradient(
        135deg,
        var(--danger-color),
        var(--danger-dark)
      );
    }
    .toast.show {
      transform: translateX(0);
      opacity: 1;
    }
    .toast i {
      font-size: 1.3rem;
      flex-shrink: 0;
    }
    .toast-close {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      padding: 5px;
      margin-left: auto;
      border-radius: 50%;
      transition: var(--transition);
      flex-shrink: 0;
    }
    .toast-close:hover {
      background: rgba(255, 255, 255, 0.2);
    }
    /* Footer */
    .footer {
      text-align: center;
      padding: 30px 20px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      margin-top: auto;
    }
    /* Utility Classes */
    .hidden {
      display: none !important;
    }
    /* Animations */
    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    @keyframes bounce {
      0%,
      80%,
      100% {
        transform: scale(0);
      }
      40% {
        transform: scale(1);
      }
    }
    @keyframes pulse {
      0%,
      100% {
        box-shadow: 0 0 0 0 rgba(66, 184, 131, 0.7);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(66, 184, 131, 0);
      }
    }
    @keyframes glow {
      from {
        box-shadow: 0 5px 15px rgba(243, 156, 18, 0.4);
      }
      to {
        box-shadow: 0 5px 25px rgba(243, 156, 18, 0.6);
      }
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes bounceIn {
      0% {
        transform: scale(0.3);
        opacity: 0;
      }
      50% {
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    @keyframes shimmer {
      0% {
        transform: translateX(-100%);
      }
      100% {
        transform: translateX(100%);
      }
    }
    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      .logo {
        flex-direction: column;
        gap: 15px;
      }
      .logo-icon i {
        font-size: 2.5rem;
      }
      .logo-text h1 {
        font-size: 2rem;
      }
      .features {
        gap: 15px;
      }
      .input-container {
        flex-direction: column;
      }
      .input-group {
        flex-direction: column;
      }
      .video-card {
        flex-direction: column;
      }
      .video-thumbnail {
        min-width: 100%;
        height: 200px;
      }
      .format-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      .download-format-btn {
        width: 100%;
        justify-content: center;
      }
      .progress-details {
        flex-direction: column;
        gap: 8px;
        text-align: center;
      }
      .download-actions {
        flex-direction: column;
      }
      .download-actions .btn {
        width: 100%;
      }
      .error-actions {
        flex-direction: column;
      }
      .error-actions .btn {
        width: 100%;
      }
      .file-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      .file-download-btn {
        width: 100%;
        justify-content: center;
      }
      .files-header {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
      .toast-container {
        top: 10px;
        right: 10px;
        left: 10px;
      }
      .toast {
        transform: translateY(-100px);
        max-width: none;
      }
      .toast.show {
        transform: translateY(0);
      }
    }
    @media (max-width: 480px) {
      .section {
        padding: 20px;
      }
      .url-section,
      .video-info-section .video-card,
      .download-section,
      .error-section,
      .files-section {
        padding: 20px;
      }
      .video-meta {
        flex-direction: column;
        gap: 10px;
      }
      .format-details {
        justify-content: flex-start;
      }
      .progress-header {
        flex-direction: column;
        gap: 5px;
        text-align: center;
      }
    }
    /* Scrollbar Styling */
    ::-webkit-scrollbar {
      width: 8px;
    }
    ::-webkit-scrollbar-track {
      background: var(--bg-tertiary);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb {
      background: var(--primary-color);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-dark);
    }
  </style>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div class="logo">
          <div class="logo-icon">
            <i class="fab fa-facebook"></i>
          </div>
          <div class="logo-text">
            <h1>Facebook Video Downloader</h1>
            <p class="subtitle">
              Download videos in high quality with audio - Super Fast!
            </p>
          </div>
        </div>
        <div class="features">
          <span class="feature">
            <i class="fas fa-volume-up"></i>
            Audio Included
          </span>
          <span class="feature">
            <i class="fas fa-rocket"></i>
            Ultra Fast
          </span>
          <span class="feature">
            <i class="fas fa-hd-video"></i>
            HD Quality
          </span>
        </div>
      </header>
      <!-- Main Content -->
      <main class="main-content">
        <!-- URL Input Section -->
        <section class="url-section">
          <div class="input-container">
            <div class="input-group">
              <input
                type="url"
                id="videoUrl"
                placeholder="Paste Facebook video URL here..."
                class="url-input"
              />
              <button id="extractBtn" class="btn btn-primary">
                <i class="fas fa-search"></i>
                <span>Extract Info</span>
              </button>
            </div>
            <button
              id="resetBtn"
              class="btn btn-secondary"
              title="Reset Downloader"
            >
              <i class="fas fa-refresh"></i>
              <span>Reset</span>
            </button>
          </div>
          <div class="url-help">
            <i class="fas fa-info-circle"></i>
            <span
              >Paste any Facebook video URL (facebook.com, m.facebook.com, or
              fb.watch)</span
            >
          </div>
        </section>
        <!-- Loading Section -->
        <section id="loadingSection" class="section loading-section hidden">
          <div class="loading-content">
            <div class="loading-spinner">
              <div class="spinner"></div>
              <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
            <p id="loadingText" class="loading-text">
              Extracting video information...
            </p>
          </div>
        </section>
        <!-- Video Info Section -->
        <section
          id="videoInfoSection"
          class="section video-info-section hidden"
        >
          <div class="video-card">
            <div class="video-thumbnail">
              <div id="videoThumbnail" class="placeholder-image">
                <i class="fas fa-video"></i>
              </div>
              <div class="video-overlay">
                <i class="fas fa-play"></i>
              </div>
            </div>
            <div class="video-details">
              <h2 id="videoTitle">Video Title</h2>
              <div class="video-meta">
                <span id="videoUploader">
                  <i class="fas fa-user"></i> Unknown
                </span>
                <span id="videoDuration">
                  <i class="fas fa-clock"></i> 0:00
                </span>
                <span id="videoViews">
                  <i class="fas fa-eye"></i> 0 views
                </span>
              </div>
              <p id="videoDescription" class="video-description"></p>
            </div>
          </div>
          <!-- Format Selection -->
          <div class="format-section">
            <h3><i class="fas fa-download"></i> Choose Quality & Format</h3>
            <div class="format-notice">
              <i class="fas fa-volume-up"></i>
              <span
                >All video formats include audio for the best experience!</span
              >
            </div>
            <div id="formatList" class="format-list">
              <!-- Formats will be populated here -->
            </div>
          </div>
        </section>
        <!-- Download Progress Section -->
        <section id="downloadSection" class="section download-section hidden">
          <div class="download-card">
            <h3><i class="fas fa-download"></i> Download Progress</h3>
            <div class="download-info">
              <i class="fas fa-rocket"></i>
              <span>Downloading at maximum speed with audio included!</span>
            </div>
            <div class="progress-container">
              <div class="progress-header">
                <span id="progressPercent" class="progress-percent">0%</span>
                <span id="progressSpeed" class="progress-speed"
                  >Speed: N/A</span
                >
              </div>
              <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
              </div>
              <div class="progress-details">
                <span id="progressDownloaded">Downloaded: 0 MB</span>
                <span id="progressTotal">Total: 0 MB</span>
                <span id="progressEta">ETA: N/A</span>
              </div>
            </div>
            <div id="downloadComplete" class="download-complete hidden">
              <div class="success-icon">
                <i class="fas fa-check-circle"></i>
              </div>
              <p>Download completed successfully with audio!</p>
              <div class="download-actions">
                <button id="downloadFileBtn" class="btn btn-success">
                  <i class="fas fa-download"></i>
                  Download to Computer
                </button>
                <button id="downloadAnotherBtn" class="btn btn-primary">
                  <i class="fas fa-plus"></i>
                  Download Another
                </button>
              </div>
              <div class="download-notice">
                <i class="fas fa-info-circle"></i>
                <span
                  >Click "Download to Computer" to save the video file directly
                  to your device</span
                >
              </div>
              <div class="auto-reset-notice">
                <i class="fas fa-clock"></i>
                <span
                  >Auto-resetting in
                  <span id="autoResetCountdown">10</span> seconds...</span
                >
              </div>
            </div>
          </div>
        </section>
        <!-- Error Section -->
        <section id="errorSection" class="section error-section hidden">
          <div class="error-card">
            <div class="error-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3>Error</h3>
            <p id="errorMessage">An error occurred</p>
            <div class="error-actions">
              <button id="retryBtn" class="btn btn-danger">
                <i class="fas fa-redo"></i>
                Try Again
              </button>
              <button id="resetFromErrorBtn" class="btn btn-secondary">
                <i class="fas fa-refresh"></i>
                Reset
              </button>
            </div>
          </div>
        </section>
        <!-- Downloaded Files Section -->
        <section class="section files-section">
          <div class="files-header">
            <h3><i class="fas fa-folder"></i> Recent Downloads</h3>
            <button id="refreshFilesBtn" class="btn btn-outline">
              <i class="fas fa-refresh"></i>
              Refresh Files
            </button>
          </div>
          <div id="filesList" class="files-list">
            <!-- Files will be populated here -->
          </div>
        </section>
      </main>
      <!-- Footer -->
      <footer class="footer">
        <p>
          &copy; 2024 Facebook Video Downloader. Built with FastAPI & yt-dlp |
          Fast Downloads with Audio
        </p>
      </footer>
    </div>
    <!-- Toast Notifications Container -->
    <div id="toastContainer" class="toast-container"></div>

   
    <script>
          class FacebookDownloader {
        constructor() {
          this.currentVideoData = null;
          this.currentDownloadId = null;
          this.progressInterval = null;
          this.autoResetTimer = null;
          this.autoResetCountdown = null;
          this.currentFilename = null;
          this.isProcessing = false;
          this.progressCheckCount = 0;
          this.lastProgressUpdate = 0;
          this.init();
        }
        init() {
          this.bindEvents();
          this.loadRecentFiles();
        }
        bindEvents() {
          // Extract button
          document
            .getElementById("extractBtn")
            .addEventListener("click", () => {
              this.extractVideoInfo();
            });
          // Reset button
          document.getElementById("resetBtn").addEventListener("click", () => {
            this.resetDownloader();
          });
          // Enter key on URL input
          document
            .getElementById("videoUrl")
            .addEventListener("keypress", (e) => {
              if (e.key === "Enter") {
                this.extractVideoInfo();
              }
            });
          // Retry button
          document.getElementById("retryBtn").addEventListener("click", () => {
            this.hideAllSections();
            document.getElementById("videoUrl").focus();
          });
          // Reset from error button
          document
            .getElementById("resetFromErrorBtn")
            .addEventListener("click", () => {
              this.resetDownloader();
            });
          // Download another button
          document
            .getElementById("downloadAnotherBtn")
            .addEventListener("click", () => {
              this.resetDownloader();
            });
          // Refresh files button
          document
            .getElementById("refreshFilesBtn")
            .addEventListener("click", () => {
              this.loadRecentFiles();
            });
        }
        // Clear all previous data and UI state
        clearPreviousData() {
          console.log("üßπ Clearing previous data...");
          // Clear video data
          this.currentVideoData = null;
          this.currentDownloadId = null;
          this.currentFilename = null;
          this.progressCheckCount = 0;
          this.lastProgressUpdate = 0;
          // Clear video info elements
          document.getElementById("videoTitle").textContent = "Video Title";
          document.getElementById("videoUploader").innerHTML =
            '<i class="fas fa-user"></i> Unknown';
          document.getElementById("videoDuration").innerHTML =
            '<i class="fas fa-clock"></i> 0:00';
          document.getElementById("videoViews").innerHTML =
            '<i class="fas fa-eye"></i> 0 views';
          document.getElementById("videoDescription").textContent = "";
                    
          // Reset thumbnail to placeholder
          const thumbnailContainer = document.getElementById("videoThumbnail");
          thumbnailContainer.innerHTML = '<i class="fas fa-video"></i>';
          thumbnailContainer.className = "placeholder-image";
          // Clear format list
          document.getElementById("formatList").innerHTML = "";
          // Reset progress
          this.resetProgress();
          // Clear timers
          this.clearTimers();
        }
        resetProgress() {
          document.getElementById("progressFill").style.width = "0%";
          document.getElementById("progressPercent").textContent = "0%";
          document.getElementById("progressSpeed").textContent = "Speed: N/A";
          document.getElementById("progressEta").textContent = "ETA: N/A";
          document.getElementById("progressDownloaded").textContent =
            "Downloaded: 0 MB";
          document.getElementById("progressTotal").textContent = "Total: 0 MB";
          document.getElementById("downloadComplete").classList.add("hidden");
        }
        clearTimers() {
          if (this.progressInterval) {
            clearInterval(this.progressInterval);
            this.progressInterval = null;
          }
          if (this.autoResetTimer) {
            clearTimeout(this.autoResetTimer);
            this.autoResetTimer = null;
          }
          if (this.autoResetCountdown) {
            clearInterval(this.autoResetCountdown);
            this.autoResetCountdown = null;
          }
        }
        async forceDownload(filename) {
          try {
            console.log(`üîΩ Starting download for: ${filename}`);
            const downloadUrl = `/download_file/${encodeURIComponent(
              filename
            )}`;
            try {
              const response = await fetch(downloadUrl);
              if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
              }
              const blob = await response.blob();
              const url = window.URL.createObjectURL(blob);
              const a = document.createElement("a");
              a.style.display = "none";
              a.href = url;
              a.download = filename;
              document.body.appendChild(a);
              a.click();
              setTimeout(() => {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
              }, 100);
              this.showToast(
                "Download started! Check your Downloads folder.",
                "success"
              );
            } catch (fetchError) {
              console.log("‚ö†Ô∏è Fetch method failed, trying direct link method");
              const a = document.createElement("a");
              a.href = downloadUrl;
              a.download = filename;
              a.target = "_self";
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
              this.showToast(
                'Download started! If it opens in browser, right-click and "Save As"',
                "success"
              );
            }
          } catch (error) {
            console.error("‚ùå Download error:", error);
            this.showToast(
              "Download failed. Please try again or check the Recent Downloads section.",
              "error"
            );
          }
        }
        showToast(message, type = "success") {
          const toast = document.createElement("div");
          toast.className = `toast ${type}`;
          toast.innerHTML = `
            <i class="fas ${
              type === "success" ? "fa-check-circle" : "fa-exclamation-triangle"
            }"></i>
            <span>${message}</span>
            <button class="toast-close" onclick="this.parentElement.remove()">
                <i class="fas fa-times"></i>
            </button>
        `;
          document.getElementById("toastContainer").appendChild(toast);
          setTimeout(() => {
            toast.classList.add("show");
          }, 100);
          setTimeout(() => {
            if (toast.parentNode) {
              toast.classList.remove("show");
              setTimeout(() => {
                if (toast.parentNode) {
                  toast.parentNode.removeChild(toast);
                }
              }, 300);
            }
          }, 5000);
        }
        resetDownloader() {
          console.log("üîÑ Resetting downloader...");
          this.isProcessing = false;
          this.clearPreviousData();
          // Clear URL input
          document.getElementById("videoUrl").value = "";
          // Hide all sections
          this.hideAllSections();
          // Focus on URL input
          document.getElementById("videoUrl").focus();
          // Refresh files list
          this.loadRecentFiles();
          this.showToast("Downloader reset successfully!", "success");
          console.log("‚úÖ Downloader reset complete");
        }
        startAutoReset() {
          let countdown = 10;
          const countdownElement =
            document.getElementById("autoResetCountdown");
          this.autoResetCountdown = setInterval(() => {
            countdown--;
            if (countdownElement) {
              countdownElement.textContent = countdown;
            }
            if (countdown <= 0) {
              clearInterval(this.autoResetCountdown);
              this.resetDownloader();
            }
          }, 1000);
          this.autoResetTimer = setTimeout(() => {
            this.resetDownloader();
          }, 10000);
        }
        cancelAutoReset() {
          this.clearTimers();
        }
        async extractVideoInfo() {
          if (this.isProcessing) {
            console.log("‚ö†Ô∏è Already processing, ignoring request");
            return;
          }
          const url = document.getElementById("videoUrl").value.trim();
          if (!url) {
            this.showError("Please enter a Facebook video URL");
            return;
          }
          if (!this.isValidFacebookUrl(url)) {
            this.showError(
              "Please enter a valid Facebook video URL (facebook.com, m.facebook.com, or fb.watch)"
            );
            return;
          }
          this.isProcessing = true;
          this.clearPreviousData();
          this.hideAllSections();
          this.showLoading("Extracting video information...");
          try {
            const response = await fetch("/extract_info", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({ url: url }),
            });
            const data = await response.json();
            if (!response.ok) {
              throw new Error(data.detail || "Failed to extract video info");
            }
            this.currentVideoData = data;
            this.displayVideoInfo(data);
          } catch (error) {
            console.error("Extract error:", error);
            this.showError(error.message);
          } finally {
            this.isProcessing = false;
          }
        }
        displayVideoInfo(data) {
          this.hideAllSections();
          // Set video thumbnail with fallback
          const thumbnailContainer = document.getElementById("videoThumbnail");
          if (data.thumbnail) {
            // Create img element and replace placeholder
            const img = document.createElement("img");
            img.src = data.thumbnail;
            img.alt = "Video Thumbnail";
            img.style.width = "100%";
            img.style.height = "100%";
            img.style.objectFit = "cover";
                        
            img.onerror = () => {
              // If image fails to load, revert to placeholder
              thumbnailContainer.innerHTML = '<i class="fas fa-video"></i>';
              thumbnailContainer.className = "placeholder-image";
            };
                        
            img.onload = () => {
              // Replace placeholder with actual image
              thumbnailContainer.innerHTML = "";
              thumbnailContainer.appendChild(img);
              thumbnailContainer.className = "";
            };
          } else {
            // Keep placeholder
            thumbnailContainer.innerHTML = '<i class="fas fa-video"></i>';
            thumbnailContainer.className = "placeholder-image";
          }
          // Set video details
          document.getElementById("videoTitle").textContent =
            data.title || "Unknown Title";
          document.getElementById(
            "videoUploader"
          ).innerHTML = `<i class="fas fa-user"></i> ${
            data.uploader || "Unknown"
          }`;
          document.getElementById(
            "videoDuration"
          ).innerHTML = `<i class="fas fa-clock"></i> ${this.formatDuration(
            data.duration
          )}`;
          document.getElementById(
            "videoViews"
          ).innerHTML = `<i class="fas fa-eye"></i> ${this.formatNumber(
            data.view_count
          )} views`;
          // Set description
          const descElement = document.getElementById("videoDescription");
          if (data.description) {
            descElement.textContent = data.description;
            descElement.style.display = "block";
          } else {
            descElement.style.display = "none";
          }
          // Populate formats
          const formatList = document.getElementById("formatList");
          formatList.innerHTML = "";
          if (!data.formats || data.formats.length === 0) {
            formatList.innerHTML =
              '<p class="no-formats">No downloadable formats available</p>';
            document
              .getElementById("videoInfoSection")
              .classList.remove("hidden");
            return;
          }
          data.formats.forEach((format) => {
            const formatItem = document.createElement("div");
            formatItem.className = "format-item";
            let priorityBadge = "";
            if (format.type === "combined" || format.type === "best_combined") {
              priorityBadge = '<span class="priority-badge">RECOMMENDED</span>';
            }
            const formatDetails = this.getFormatDetails(format);
            formatItem.innerHTML = `
                <div class="format-info">
                    <div class="format-quality">
                        <i class="fas ${
                          format.type === "audio_only" ? "fa-music" : "fa-video"
                        }"></i>
                        ${format.quality}
                        ${priorityBadge}
                    </div>
                    <div class="format-details">
                        ${formatDetails}
                    </div>
                </div>
                <button class="download-format-btn ${
                  format.type === "combined" || format.type === "best_combined"
                    ? "recommended"
                    : ""
                }" data-format-id="${format.format_id}">
                    <i class="fas fa-download"></i>
                    <span>Download</span>
                </button>
            `;
            formatItem
              .querySelector(".download-format-btn")
              .addEventListener("click", () => {
                this.downloadVideo(format.format_id);
              });
            formatList.appendChild(formatItem);
          });
          document
            .getElementById("videoInfoSection")
            .classList.remove("hidden");
        }
        getFormatDetails(format) {
          if (format.type === "combined" || format.type === "best_combined") {
            return `
                <span class="format-ext">${format.ext.toUpperCase()}</span>
                <span class="format-size">${this.formatFileSize(
                  format.filesize
                )}</span>
                <span class="format-audio"><i class="fas fa-volume-up"></i> Audio</span>
                ${
                  format.fps
                    ? `<span class="format-fps">${format.fps}fps</span>`
                    : ""
                }
            `;
          } else if (format.type === "video_only") {
            return `
                <span class="format-ext">${format.ext.toUpperCase()}</span>
                <span class="format-size">${this.formatFileSize(
                  format.filesize
                )}</span>
                <span class="format-audio-warning"><i class="fas fa-volume-mute"></i> No Audio</span>
                ${
                  format.fps
                    ? `<span class="format-fps">${format.fps}fps</span>`
                    : ""
                }
            `;
          } else {
            return `
                <span class="format-ext">${format.ext.toUpperCase()}</span>
                <span class="format-size">${this.formatFileSize(
                  format.filesize
                )}</span>
                ${
                  format.abr
                    ? `<span class="format-bitrate">${format.abr}kbps</span>`
                    : ""
                }
            `;
          }
        }
        async downloadVideo(formatId) {
          if (this.isProcessing) {
            console.log("‚ö†Ô∏è Already processing, ignoring download request");
            return;
          }
          const url = document.getElementById("videoUrl").value.trim();
          this.isProcessing = true;
          this.hideAllSections();
          this.showLoading("Starting ultra-fast download...");
          try {
            const response = await fetch("/download", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                url: url,
                format_id: formatId,
              }),
            });
            const data = await response.json();
            if (!response.ok) {
              throw new Error(data.detail || "Download failed");
            }
            this.currentDownloadId = data.download_id;
            this.progressCheckCount = 0;
            this.lastProgressUpdate = Date.now();
            this.hideAllSections();
            document
              .getElementById("downloadSection")
              .classList.remove("hidden");
            this.startProgressTracking();
          } catch (error) {
            console.error("Download error:", error);
            this.showError(error.message);
          } finally {
            this.isProcessing = false;
          }
        }
        startProgressTracking() {
          let attempts = 0;
          const maxAttempts = 180; // 3 minutes max (reduced from 5 minutes)
          let consecutiveNoProgress = 0;
          let lastPercent = 0;
          // Start with faster polling, then slow down
          let pollInterval = 2000; // Start with 2 seconds
          this.progressInterval = setInterval(async () => {
            attempts++;
            this.progressCheckCount++;
            if (attempts > maxAttempts) {
              clearInterval(this.progressInterval);
              this.showError("Download timeout. Please try again.");
              return;
            }
            try {
              const response = await fetch(
                `/progress/${this.currentDownloadId}`
              );
              const progress = await response.json();
              if (progress.status === "downloading") {
                this.updateProgress(progress);
                // Check if progress is stuck
                const currentPercent = progress.percent || 0;
                if (currentPercent === lastPercent) {
                  consecutiveNoProgress++;
                  if (consecutiveNoProgress > 10) {
                    // 20 seconds of no progress
                    console.log(
                      "‚ö†Ô∏è Download appears stuck, checking for completion..."
                    );
                    // Don't error immediately, let backend handle it
                  }
                } else {
                  consecutiveNoProgress = 0;
                  lastPercent = currentPercent;
                  // Slow down polling as download progresses
                  if (currentPercent > 50 && pollInterval < 3000) {
                    clearInterval(this.progressInterval);
                    pollInterval = 3000;
                    this.startProgressTracking(); // Restart with slower interval
                    return;
                  }
                }
              } else if (progress.status === "finished") {
                this.downloadComplete(progress.filename);
                clearInterval(this.progressInterval);
              } else if (progress.status === "error") {
                this.showError(progress.error || "Download failed");
                clearInterval(this.progressInterval);
              } else if (
                progress.status === "starting" ||
                progress.status === "preparing"
              ) {
                document.getElementById("loadingText").textContent =
                  progress.message || "Preparing download...";
              } else if (
                progress.status === "merging" ||
                progress.status === "processing"
              ) {
                this.updateProgress({
                  ...progress,
                  percent: Math.max(progress.percent || 95, 95),
                });
              }
            } catch (error) {
              console.error("Progress tracking error:", error);
              // Don't stop on network errors, but count them
              consecutiveNoProgress++;
              if (consecutiveNoProgress > 15) {
                clearInterval(this.progressInterval);
                this.showError(
                  "Connection lost. Please check your internet and try again."
                );
              }
            }
          }, pollInterval);
        }
        updateProgress(progress) {
          const percent = Math.min(progress.percent || 0, 100);
          document.getElementById("progressFill").style.width = `${percent}%`;
          document.getElementById(
            "progressPercent"
          ).textContent = `${Math.round(percent)}%`;
          document.getElementById("progressSpeed").textContent = `Speed: ${
            progress.speed || "N/A"
          }`;
          document.getElementById("progressEta").textContent = `ETA: ${
            progress.eta || "N/A"
          }`;
          if (progress.downloaded) {
            document.getElementById(
              "progressDownloaded"
            ).textContent = `Downloaded: ${this.formatFileSize(
              progress.downloaded
            )}`;
          }
          if (progress.total) {
            document.getElementById(
              "progressTotal"
            ).textContent = `Total: ${this.formatFileSize(progress.total)}`;
          }
          this.lastProgressUpdate = Date.now();
        }
        downloadComplete(filename) {
          document.getElementById("progressFill").style.width = "100%";
          document.getElementById("progressPercent").textContent = "100%";
          this.currentFilename = filename;
          const downloadComplete = document.getElementById("downloadComplete");
          const downloadBtn = document.getElementById("downloadFileBtn");
          downloadBtn.onclick = () => {
            this.forceDownload(filename);
          };
          downloadComplete.classList.remove("hidden");
          this.loadRecentFiles();
          this.startAutoReset();
          console.log(
            "‚úÖ Download completed, auto-reset will start in 10 seconds"
          );
        }
        // async loadRecentFiles() {
        //   try {
        //     const response = await fetch("/list_files");
        //     const files = await response.json();
        //     const filesList = document.getElementById("filesList");
        //     filesList.innerHTML = "";
        //     if (!files || files.length === 0) {
        //       filesList.innerHTML =
        //         '<p class="no-files">No downloaded files yet</p>';
        //       return;
        //     }
        //     files.forEach((file) => {
        //       const fileItem = document.createElement("div");
        //       fileItem.className = "file-item";
        //       fileItem.innerHTML = `
        //             <div class="file-info">
        //                 <i class="fas fa-file-video"></i>
        //                 <div class="file-details">
        //                     <div class="file-name" title="${
        //                       file.name
        //                     }">${this.truncateFilename(file.name, 50)}</div>
        //                     <div class="file-size">${this.formatFileSize(
        //                       file.size
        //                     )} ‚Ä¢ <i class="fas fa-volume-up"></i> With Audio</div>
        //                 </div>
        //             </div>
        //             <button class="file-download-btn" onclick="window.facebookDownloader.forceDownload('${
        //               file.name
        //             }')">
        //                 <i class="fas fa-download"></i>
        //                 Download
        //             </button>
        //         `;
        //       filesList.appendChild(fileItem);
        //     });
        //   } catch (error) {
        //     console.error("Failed to load files:", error);
        //     const filesList = document.getElementById("filesList");
        //     filesList.innerHTML = '<p class="no-files">Error loading files</p>';
        //   }
        // }
        
        
        
        
        
        
        
        
        
        showLoading(message = "Loading...") {
          document.getElementById("loadingText").textContent = message;
          document.getElementById("loadingSection").classList.remove("hidden");
        }
        showError(message) {
          this.hideAllSections();
          document.getElementById("errorMessage").textContent = message;
          document.getElementById("errorSection").classList.remove("hidden");
          this.isProcessing = false;
        }
        hideAllSections() {
          const sections = [
            "loadingSection",
            "videoInfoSection",
            "downloadSection",
            "errorSection",
          ];
          sections.forEach((id) => {
            document.getElementById(id).classList.add("hidden");
          });
          this.clearTimers();
        }
        isValidFacebookUrl(url) {
          const lowerUrl = url.toLowerCase();
          return (
            lowerUrl.includes("facebook.com") ||
            lowerUrl.includes("fb.watch") ||
            lowerUrl.includes("m.facebook.com")
          );
        }
        formatDuration(seconds) {
          if (!seconds || seconds === 0) return "0:00";
          const mins = Math.floor(seconds / 60);
          const secs = seconds % 60;
          return `${mins}:${secs.toString().padStart(2, "0")}`;
        }
        formatNumber(num) {
          if (!num || num === 0) return "0";
          if (num >= 1000000) return (num / 1000000).toFixed(1) + "M";
          if (num >= 1000) return (num / 1000).toFixed(1) + "K";
          return num.toString();
        }
        formatFileSize(bytes) {
          if (!bytes || bytes === 0) return "Unknown";
          const sizes = ["Bytes", "KB", "MB", "GB"];
          const i = Math.floor(Math.log(bytes) / Math.log(1024));
          return (
            Math.round((bytes / Math.pow(1024, i)) * 100) / 100 + " " + sizes[i]
          );
        }
        truncateFilename(filename, maxLength) {
          if (filename.length <= maxLength) return filename;
          const ext = filename.split(".").pop();
          const name = filename.substring(0, filename.lastIndexOf("."));
          const truncated =
            name.substring(0, maxLength - ext.length - 4) + "...";
          return truncated + "." + ext;
        }
      }
      // Initialize the app when DOM is loaded
      let facebookDownloader;
      document.addEventListener("DOMContentLoaded", () => {
        facebookDownloader = new FacebookDownloader();
        window.facebookDownloader = facebookDownloader; // Make it globally accessible
      });
    </script>

  </body>
</html>
